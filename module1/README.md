# Module 1: Noise Simulator

This module simulates noisy input from clean data for AAC (Augmentative and Alternative Communication) systems. It generates realistic typing errors based on different keyboard layouts, input methods, and error patterns.

## Features

- **Keyboard Layout-Based Errors**: Simulate typing errors based on the physical proximity of keys in different keyboard layouts (QWERTY, AZERTY, DVORAK, etc.)
- **Multiple Input Methods**: Support for different input methods:
  - **Direct Access**: Standard typing with fingers (e.g., touchscreen, physical keyboard)
  - **Scanning**: Row-column or linear scanning with switches
  - **Eyegaze**: Selection using eye tracking
- **Configurable Error Types**:
  - **Proximity Errors**: Typing a key adjacent to the intended key
  - **Deletion Errors**: Missing a key entirely
  - **Insertion Errors**: Typing a key twice or inserting an extra key
  - **Transposition Errors**: Swapping adjacent characters
- **Multi-Language Support**: Includes keyboard layouts for multiple languages
- **Customizable Error Rates**: Configure error rates for different error types
- **Composite Error Models**: Combine multiple error models for more realistic simulations

## Files

- `keyboard_error_model.py`: Implements keyboard layout-based error simulation
- `noise_model.py`: Provides a framework for generating noisy data with different error models
- `simulate.py`: Command-line interface for generating noisy data
- `language_keyboards.py`: Contains keyboard layouts for different languages
- `scanning_library.py`: Implements scanning simulation methods
- `metrics.py`: Contains metrics for evaluating prediction accuracy
- `config_examples/`: Example configuration files for different scenarios

## Usage

### Command-Line Interface

```bash
# Basic usage
python module1/simulate.py --input data/wordlist.txt --output data/noisy_pairs.json

# Specify keyboard layout and input method
python module1/simulate.py --input data/wordlist.txt --output data/noisy_pairs.json --layout fr --method eyegaze

# Use a configuration file
python module1/simulate.py --input data/wordlist.txt --output data/noisy_pairs.json --config module1/config_examples/qwerty_direct.json

# Generate multiple variants
python module1/simulate.py --input data/wordlist.txt --output data/noisy_pairs.json --variants 5

# Customize error rates
python module1/simulate.py --input data/wordlist.txt --output data/noisy_pairs.json --proximity 0.1 --deletion 0.05 --insertion 0.03 --transposition 0.02
```

### Python API

```python
from module1.noise_model import KeyboardNoiseModel, CompositeNoiseModel

# Create a keyboard noise model
keyboard_model = KeyboardNoiseModel(
    layout_name="en",  # English QWERTY
    error_rates={
        "proximity": 0.05,
        "deletion": 0.03,
        "insertion": 0.02,
        "transposition": 0.01
    },
    input_method="direct"
)

# Apply the model to a text
clean_text = "Hello world"
noisy_text = keyboard_model.apply(clean_text)
print(f"Clean: {clean_text}")
print(f"Noisy: {noisy_text}")

# Generate multiple noisy variants
texts = ["Hello world", "Testing 123", "AAC is great"]
noisy_pairs = keyboard_model.generate_noisy_pairs(texts, num_variants=3)
for clean, noisy in noisy_pairs:
    print(f"Clean: {clean}")
    print(f"Noisy: {noisy}")
    print()
```

## Configuration

You can configure the noise models using JSON files. Here's an example configuration:

```json
{
  "type": "composite",
  "models": [
    {
      "type": "keyboard",
      "layout_name": "en",
      "input_method": "direct",
      "error_rates": {
        "proximity": 0.05,
        "deletion": 0.0,
        "insertion": 0.0,
        "transposition": 0.0
      }
    },
    {
      "type": "dwell",
      "deletion_rate": 0.03,
      "insertion_rate": 0.02
    },
    {
      "type": "transposition",
      "transposition_rate": 0.01
    }
  ]
}
```

## Supported Languages

The module supports keyboard layouts for the following languages:

- English (QWERTY)
- French (AZERTY)
- German (QWERTZ)
- Spanish (QWERTY with Ñ)
- Italian (QWERTY)
- Dutch (QWERTY)
- Greek
- Russian
- Hebrew
- Arabic
- Portuguese (QWERTY with Ç)
- Welsh (QWERTY)
- Japanese

## Testing

You can test the keyboard error models using the provided test script:

```bash
python module1/test_keyboard_errors.py
```

This will generate noisy versions of sample texts using different keyboard layouts and input methods.

## Integration with Other Modules

The noisy data generated by this module can be used to:

1. Build a confusion matrix in Module 2
2. Train and evaluate the correction engine in Module 4
3. Generate test datasets for the demo and evaluation tools
